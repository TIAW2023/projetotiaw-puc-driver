<div class="p-2">
    <div class="row">
        <div class="col-12">
            <p class="text-center">Informações da Van</p>
        </div>
        <div class="col-3">
            <p>Placa</p>
        </div>
        <div class="col-9">
            <input type="text" id="placa" class="w-100">
        </div>
        <div class="col-3">
            <p>Chassi</p>
        </div>
        <div class="col-9">
            <input type="text" id="chassi" class="w-100">
        </div>
        <div class="col-3">
            <p>Ano/Modelo</p>
        </div>
        <div class="col-9">
            <input type="text" id="modelo" class="w-100">
        </div>
    </div>

    <div class="d-flex justify-content-center">
        <button id="btn-info-van" class="btn btn-primary">Salvar</button>
    </div>
</div>

<script>
    $(document).ready(() => {
        let motorista = loadDadosBasicos();

        carregarInfoVan(motorista)
        
        $('#btn-info-van').click(() => {
            salvarInfoVan(motorista)
        })
    })

    function carregarInfoVan(motorista){
        $('#placa').val(motorista.placaCad)
        $('#chassi').val(motorista.chassiCad)
        $('#modelo').val(motorista.anoCad)
    }

    function salvarInfoVan(motorista){
        let motoristas = JSON.parse(localStorage.getItem("listaUser") || []);
        let motoristaAtualizado = motoristas.filter(obj => obj.cpfCad != motorista.cpfCad )

        motorista.placaCad = $('#placa').val()
        motorista.chassiCad = $('#chassi').val()
        motorista.modeloCad = $('#modelo').val()

        motoristaAtualizado.push(motorista)

        localStorage.removeItem('listaUser')
        localStorage.setItem('listaUser',JSON.stringify(motoristaAtualizado))
        alert('Info da van salva com sucesso!')
    }

    function loadDadosBasicos(){
        let idMotorista = JSON.parse(localStorage.getItem("user-authenticated-id")).id;

        let motoristas = JSON.parse(localStorage.getItem("listaUser") || []);
        let motorista = motoristas.filter(item => {
            if(item.cpfCad == idMotorista){
                return item;
            }
        })[0];

        return motorista;
    }
</script>