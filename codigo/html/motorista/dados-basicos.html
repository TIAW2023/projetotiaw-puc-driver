<div class="p-2">
    <div class="row">
        <div class="col-12">
            <p class="text-center">Dados BÃ¡sicos</p>
        </div>
        <div class="col-3">
            <p>Nome</p>
        </div>
        <div class="col-9">
            <input type="text" id="nome" class="w-100">
        </div>
    
        <div class="col-3">
            <p>CPF</p>
        </div>
        <div class="col-9">
            <input type="text" id="cpf" class="w-100">
        </div>
        <div class="col-3">
            <p>Telefone</p>
        </div>
        <div class="col-9">
            <input type="text" id="telefone" class="w-100">
        </div>
        <div class="col-3">
            <p>Email</p>
        </div>
        <div class="col-9">
            <input type="text" id="email" class="w-100">
        </div>
        <div class="col-3">
            <p>Senha</p>
        </div>
        <div class="col-9">
            <input type="password" id="senha" class="w-100">
        </div>
    </div>
    <div class="d-flex justify-content-center">
        <button id="btn-dados-basicos" class="btn btn-primary">Salvar</button>
    </div>
</div>

<script>
    $(document).ready(() => {
        let motorista = loadDadosBasicos();
        console.log(motorista)
        carregarDadosBasicos(motorista)
        
        $('#btn-dados-basicos').click(() => {
            salvarDadosBasicos(motorista)
        })
    })

    function carregarDadosBasicos(motorista){
        $("#nome").val(motorista.nomeCad)
        $("#cpf").val(motorista.cpfCad)
        $("#telefone").val(motorista.telefoneCad)
        $("#email").val(motorista.emailCad)
        $("#senha").val(motorista.senhaCad)
    }

    function salvarDadosBasicos(motorista){
        console.log(">>>" + motorista)
        try {
            motorista.nomeCad = $("#nome").val()
            motorista.cpfCad = $("#cpf").val()
            motorista.telefoneCad = $("#telefone").val()
            motorista.emailCad = $("#email").val()
            motorista.senhaCad = $("#senha").val()

            let motoristas = JSON.parse(localStorage.getItem("listaUser") || []);
            let motoristaAtualizado = motoristas.filter(obj => obj.cpfCad != motorista.cpfCad )

            motoristaAtualizado.push(motorista)
            localStorage.removeItem('listaUser')
            localStorage.setItem('listaUser',JSON.stringify(motoristaAtualizado))
            alert('Dados basicos salvo com sucesso!')
        } catch (error) {
            alert('Erro ao salvar dados basicos! Erro: ' + error)
        }
    }

    function loadDadosBasicos(){
        let idMotorista = JSON.parse(localStorage.getItem("user-authenticated-id")).id;

        let motoristas = JSON.parse(localStorage.getItem("listaUser") || []);
        let motorista = motoristas.filter(item => {
            if(item.cpfCad == idMotorista){
                return item;
            }
        })[0];
        return motorista;
    }
</script>